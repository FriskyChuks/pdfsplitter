{% extends 'base.html' %}
{% load static %}

{% block title %} Login {% endblock title %}

{% block content %}
<br>
<div class="container">
  <div class="text-center">
    <h4 class="display-6">Change Password</h4>
  </div>
  <hr>
  <!-- <div class="row align-items-center m-auto pt-5 px-6 px-lg-0"> -->
  <div class="row g-3">
    <div class="col-md-3">
    </div>
    <div class="col-md-6">
      <form id="form" method="POST" enctype="multipart/form-data"
        class="form-group flex-wrap bg-white rounded-4 ms-md-5">
        {% csrf_token %}
        {% if msg %}
        <div class="alert {{col}}">{{msg}}</div>
        {% endif %}
        <div class="col-lg-12 my-4">
          <label for="username">Current Password</label>
          <input type="password" class="form-control px-4 py-3 bg-transparent mb-3" name="current_password"
            placeholder="Enter Current Password">
          <label for="password">New Password</label>
          <input type="password" class="form-control px-4 py-3 bg-transparent mb-3" id="new_password"
            name="new_password" placeholder="Enter New Password" required onkeyup="check_pass()">
          <label for="password">Confirm Password</label>
          <input type="password" class="form-control px-4 py-3 bg-transparent mb-3" id="confirm_password"
            name="confirm_password" placeholder="Confirm New Password" required onkeyup="check_pass()">
          <div class="d-grid">
            {% if request.GET.next %}
            <input type="hidden" name="next" value="{{ request.GET.next }}">
            {% endif %}
            <button class="btn btn-arrow btn-primary mt-3">
              <span>Login
                <svg width="18" height="18">
                  <use xlink:href="#arrow-right"></use>
                </svg>
              </span>
            </button>
          </div>
        </div>
      </form>
    </div>
    <div class="col-md-3">
    </div>
  </div>
</div>
<br>
<hr>

<script>
  function check_pass() {
    let p = $("#new_password").val();
    let cp = $("#confirm_password").val();
    if (p == cp) {
      $("#new_password").css("border", "2px solid green");
      $("#confirm_password").css("border", "2px solid green");
      $("#sbbtn").removeAttr("disabled");

    } else {
      $("#new_password").css("border", "1px solid red");
      $("#confirm_password").css("border", "1px solid red");
      $("#sbbtn").attr("disabled");
    }
  }
</script>
{% endblock content %}